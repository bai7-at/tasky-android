!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n="undefined"!=typeof globalThis?globalThis:n||self,function(){var t=n.Abra,e=n.Abra=r();e.noConflict=function(){return n.Abra=t,e}}())}(this,(function(){"use strict";var n=Array.isArray,r=function(n,r,t){var e=n(t,r),u=e[0],o=e[1];if(null==u||""===u)return r;for(var i=String(u).split("."),f=0;f<i.length&&(r=r[i[f]]);f++);return null==r&&(r=o),null!=r?r:null},t=function(n,r,t){return n(t,r).reduce((function(n,r){return parseFloat(n)+parseFloat(r)}),0)},e=function(n,r,t){var e=n(t,r);return e[0]/e[1]},u=function(n,r,t){var e=n(t,r);return e[0]%e[1]},o=function(n,r,t){return n(t,r).reduce((function(n,r){return parseFloat(n)*parseFloat(r)}),1)},i=function(n,r,t){var e=n(t,r),u=e[0],o=e[1];return void 0===o?-u:u-o};function f(r){return!(n(r)&&0===r.length||!r)}var a=function(n,r,t){for(var e,u=0;u<t.length;u++)if(!f(e=n(t[u],r)))return e;return e},c=function(n,r,t){var e;for(e=0;e<t.length-1;e+=2)if(f(n(t[e],r)))return n(t[e+1],r);return t.length===e+1?n(t[e],r):null},l=function(n,r,t){return!f(n(t,r)[0])},v=function(n,r,t){for(var e,u=0;u<t.length;u++)if(f(e=n(t[u],r)))return e;return e},d=function(n,r,t){var e=n(t,r);return e[0]===e[1]},s=function(n,r,t){var e=n(t,r);return e[0]!==e[1]},h=function(n,r,t){var e=n(t,r),u=e[0],o=e[1];return!(!o||void 0===o.indexOf)&&-1!==o.indexOf(u)},p=function(n,r,t){var e=n(t,r);return e[0]>e[1]},g=function(n,r,t){var e=n(t,r);return e[0]>=e[1]},b=function(n,r,t){var e=n(t,r),u=e[0],o=e[1],i=e[2];return void 0===i?u<o:u<o&&o<i},y=function(n,r,t){var e=n(t,r),u=e[0],o=e[1],i=e[2];return void 0===i?u<=o:u<=o&&o<=i},O=function(n,r,t){var e=t[0],u=t[1],o=t.slice(2),i=n(e,r);if(!i)return null;if(0===o.length)return null;if(1===o.length)return n(o[0],r);if(4294967295===o[0])return n(o[1],r);for(var f=function(n){var r,t,e,u,o,i=[],f=[t=1732584193,e=4023233417,~t,~e,3285377520],a=[],c=unescape(encodeURI(n))+"\x80",l=c.length;for(a[n=--l/4+2|15]=8*l;~l;)a[l>>2]|=c.charCodeAt(l)<<8*~l--;for(r=l=0;r<n;r+=16){for(t=f;l<80;t=[t[4]+(i[l]=l<16?~~a[r+l]:2*c|c<0)+1518500249+[e&u|~e&o,c=341275144+(e^u^o),882459459+(e&u|e&o|u&o),c+1535694389][l++/5>>2]+((c=t[0])<<5|c>>>27),c,e<<30|e>>>2,u,o])c=i[l-3]^i[l-8]^i[l-14]^i[l-16],e=t[1],u=t[2],o=t[3];for(l=5;l;)f[--l]+=t[l]}return f[0]>>>0}(i+" "+n(u,r));o.length>1;){var a=o.splice(0,2),c=a[0],l=a[1];if(f<=n(c,r))return n(l,r)}return 0===o.length?null:n(o[0],r)},j=function(n,r,t){var e=t[0],u=t[1],o=n(e,r);return null==o?null:new RegExp(u).test(o)};return function(f,w,x,A){void 0===f&&(f={}),void 0===w&&(w={}),void 0===x&&(x={}),void 0===A&&(A=!1);var m=[{},!1],E=m[0],F=m[1];Object.keys(x).forEach((function(n){E[n]=x[n]}));var k,C=A||F,R=(k={var:r,if:c,"===":d,"!==":s,and:a,or:v,"!":l,">":p,">=":g,"<":b,"<=":y,"+":t,"-":i,"*":o,"/":e,"%":u,in:h,abtest_partition:O,regex_match:j,ref:function(n,r,t){var e=n(t,r)[0];return T(e)}},function r(t,e){if(e||(e={}),n(t))return t.map((function(n){return r(n,e)}));if(!function(r){return"object"==typeof r&&null!==r&&!n(r)&&1===Object.keys(r).length}(t))return t;var u=function(n){return Object.keys(n)[0]}(t),o=t[u];n(o)||(o=[o]);var i=k[u];if(!i)throw new Error("Unrecognized operation "+u);return i(r,e,o)}),T=function(n){if(!n)return null;var r=E[n];if(void 0===r){if(!C){if(Object.prototype.hasOwnProperty.call(E,n))throw new Error("circular logic");E[n]=void 0,r=R(f[n],w)}void 0===r&&(r=null),E[n]=r}return r};return T}}));
//# sourceMappingURL=abra.bare-es.min.js.map
